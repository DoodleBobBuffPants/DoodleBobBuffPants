1:HL["/DoodleBobBuffPants/_next/static/media/2aaf0723e720e8b9-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/DoodleBobBuffPants/_next/static/css/f599d18cbb7dc8b9.css",{"as":"style"}]
0:["htLHcP4QlqI-VPC-91G9J",[[["",{"children":["posts",{"children":[["slug","2022/10/05/React-%2B-GitHub-Pages_404s-with-React-Router","c"],{"children":["__PAGE__?{\"slug\":[\"2022\",\"10\",\"05\",\"React-+-GitHub-Pages_404s-with-React-Router\"]}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/DoodleBobBuffPants/_next/static/css/f599d18cbb7dc8b9.css","precedence":"next"}]],["$L4",["$","meta",null,{"name":"next-size-adjust"}]]]]]]
5:I{"id":"3614","chunks":["160:static/chunks/160-e8a527a9bad60f49.js","394:static/chunks/394-12df5e94d089057d.js","782:static/chunks/782-1ca8b1701faf84c3.js","185:static/chunks/app/layout-7c530411beffcfb4.js"],"name":"","async":false}
6:I{"id":"3211","chunks":["272:static/chunks/webpack-3c0103620b7d5368.js","253:static/chunks/bce60fc1-1fb825080aa05c2d.js","769:static/chunks/769-33ddfebaeccd90b1.js"],"name":"","async":false}
7:I{"id":"9529","chunks":["160:static/chunks/160-e8a527a9bad60f49.js","864:static/chunks/864-fc54d328e346eb36.js","555:static/chunks/app/loading-c55be19d14dc628f.js"],"name":"","async":false}
8:I{"id":"5767","chunks":["272:static/chunks/webpack-3c0103620b7d5368.js","253:static/chunks/bce60fc1-1fb825080aa05c2d.js","769:static/chunks/769-33ddfebaeccd90b1.js"],"name":"","async":false}
9:I{"id":"1123","chunks":["160:static/chunks/160-e8a527a9bad60f49.js","864:static/chunks/864-fc54d328e346eb36.js","201:static/chunks/app/posts/[...slug]/loading-122392e7daaba111.js"],"name":"","async":false}
3:[["$","html",null,{"lang":"en","children":[["$","head",null,{"children":[["$","meta",null,{"name":"google-site-verification","content":"H3lu4upSAU3DePAx6VgfNuTcnzcmWXcS0yCjMOOPzJ4"}],["$","link",null,{"rel":"stylesheet","href":"https://unpkg.com/prism-themes@1.9.0/themes/prism-vsc-dark-plus.css"}],["$","title",null,{"children":"DoodleBobBuffPants"}]]}],["$","body",null,{"className":"__className_f78232 min-h-screen pt-28","children":["$","$L5",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":["$","$L7",null,{}],"loadingStyles":[],"hasLoading":true,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["slug","2022/10/05/React-%2B-GitHub-Pages_404s-with-React-Router","c"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":["$","$L9",null,{}],"loadingStyles":[],"hasLoading":true,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$La",null],"segment":"__PAGE__?{\"slug\":[\"2022\",\"10\",\"05\",\"React-+-GitHub-Pages_404s-with-React-Router\"]}"},"styles":[]}],"segment":["slug","2022/10/05/React-%2B-GitHub-Pages_404s-with-React-Router","c"]},"styles":[]}],"segment":"posts"},"styles":[]}]}]}]]}],null]
4:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"React + GitHub Pages - 404s with React Router"}],["$","meta","2",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","3",{"rel":"icon","href":"/DoodleBobBuffPants/favicon.ico","type":"image/x-icon","sizes":"any"}]]
a:["$","div",null,{"className":"markdown","children":[["$","h1",null,{"children":"React + GitHub Pages - 404s with React Router"}],"\n",["$","p",null,{"children":["Deploying your React app to GitHub pages is a great way to learn about and share them.\nYou can do many things, for example creating mini portfolio sites such as this one!\nIt's a process that is already well documented and you can find an example piece of\ndocumentation in the ",["$","em",null,{"children":"References"}],"."]}],"\n",["$","p",null,{"children":["A common library to use with React apps is React Router which enables client side routing.\nYou can read more about React Router ",["$","a",null,{"href":"https://reactrouter.com/en/main/start/overview","children":"here"}],"\nbut in a nutshell it allows you to render different components at certain URL paths, just\nlike this post. When you run your React app and start navigating to these paths by clicking\non links, buttons etc. you'll see that the path in the URL changes and the component you've\nchosen to render at that path is rendered."]}],"\n",["$","p",null,{"children":["If, however, you refresh the page or visit a path directly in your browser, you may notice\nthat you get a ",["$","em",null,{"children":"404"}]," or a ",["$","em",null,{"children":"blank page"}],"."]}],"\n",["$","p",null,{"children":["$","em",null,{"children":"Note: Depending on how you've configured your development server, you might only get these\n404s or blank pages in production."}]}],"\n",["$","h2",null,{"children":"Why do I get 404s or blank pages?"}],"\n",["$","p",null,{"children":"React Router enables client side routing which allows the path in the URL to change without\nrequesting a page for that path from the server. The React app is then responsible for the\ncontent rendered at that path."}],"\n",["$","p",null,{"children":"This only works when you navigate to these paths once the React app is already loaded, which\nonly loads when you visit the homepage of your application. Without it loaded, client side\nrouting won't be enabled and it cannot intercept changes to the path."}],"\n",["$","p",null,{"children":"When you refresh a page or visit a path directly in your browser, the path is loaded without\nclient side routing, so a request is made for a page at that path from the server."}],"\n",["$","p",null,{"children":["With GitHub Pages, when no page exists for a path, you'll receive either a ",["$","em",null,{"children":"404"}]," page or a\n",["$","em",null,{"children":"blank page"}],"."]}],"\n",["$","h2",null,{"children":"Overcoming the 404s and blank pages"}],"\n",["$","p",null,{"children":["A few solutions are available to us which I came acrosson ",["$","a",null,{"href":"https://info340.github.io/client-side-routing.html#react-router-and-hosting","children":"this"}],"\npage about client side routing."]}],"\n",["$","p",null,{"children":["One solution is to deploy our React app to a system that allows us to serve our ",["$","code",null,{"children":"index.html"}],",\nour homepage, for any path. This would be the cleanest option as it doesn't require making changes\nto our React app, however we can't then say we've successfully deployed to GitHub Pages!"]}],"\n",["$","p",null,{"children":["Another solution is to use a ",["$","code",null,{"children":"HashRouter"}]," instead of a ",["$","code",null,{"children":"BrowserRouter"}]," from React Router. With a\n",["$","code",null,{"children":"HashRouter"}]," our homepage is requested for every path which solves our problem. The downside\nhowever is that the ",["$","code",null,{"children":"HashRouter"}]," modifies all paths by injecting a ",["$","code",null,{"children":"#"}]," into the beginning."]}],"\n",["$","p",null,{"children":"My preferred solution is to set up redirects in a custom 404 page on GitHub Pages and in our\nhomepage. This doesn't modify our paths, nor does it require changing where we deploy our React\napp, and it is a purely JavaScript-based solution too."}],"\n",["$","h3",null,{"children":"Redirects in a custom 404 page"}],"\n",["$","p",null,{"children":"How this works is when we get a 404 or a blank page, GitHub Pages can be configured to use a custom\n404 page. In this custom 404 page we will add a script element that redirects to our homepage, and the\npath that failed to load will be added as a query parameter to the redirect URL. We then also need to\nadd a script element to our homepage which reads this query parameter and sets the current path to the\nvalue we read."}],"\n",["$","p",null,{"children":"That's all there is to it! Now let's take a look at how to add the custom 404 page and the script elements\nwe need."}],"\n",["$","p",null,{"children":["A custom 404 page can be added to GitHub pages very easily - we just add a ",["$","code",null,{"children":"404.html"}]," to our output folder,\nwhich is where our ",["$","code",null,{"children":"index.html"}]," homepage is located, and we are done!"]}],"\n",["$","p",null,{"children":"Next we need a script element in this custom 404 page that redirects to the homepage but includes the current\npath as a query parameter. An example script element that achieves this is:"}],"\n",["$","div",null,{"className":"remark-highlight","children":["$","pre",null,{"className":"language-html","children":["$","code",null,{"className":"language-html","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"script"]}]," ",["$","span",null,{"className":"token attr-name","children":"type"}],["$","span",null,{"className":"token attr-value","children":[["$","span",null,{"className":"token punctuation attr-equals","children":"="}],["$","span",null,{"className":"token punctuation","children":"\""}],"text/javascript",["$","span",null,{"className":"token punctuation","children":"\""}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token script","children":["$","span",null,{"className":"token language-javascript","children":["\n  ",["$","span",null,{"className":"token keyword","children":"const"}]," l ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token dom variable","children":"window"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"location"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n  ",["$","span",null,{"className":"token keyword","children":"const"}]," pathname ",["$","span",null,{"className":"token operator","children":"="}]," l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pathname"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"startsWith"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"/\""}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"?"}]," l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pathname"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"substring"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":":"}]," l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"pathname"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n  ",["$","span",null,{"className":"token dom variable","children":"window"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"location"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"protocol"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"//"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"host"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"/?"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"pathname",["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],"script"]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],"\n"]}]}]}],"\n",["$","p",null,{"children":"Lastly we need a script element in our homepage that checks if the URL has this query parameter, and navigates\nto it as a path if it exists. An example script element that achieves this is:"}],"\n",["$","div",null,{"className":"remark-highlight","children":["$","pre",null,{"className":"language-html","children":["$","code",null,{"className":"language-html","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"script"]}]," ",["$","span",null,{"className":"token attr-name","children":"type"}],["$","span",null,{"className":"token attr-value","children":[["$","span",null,{"className":"token punctuation attr-equals","children":"="}],["$","span",null,{"className":"token punctuation","children":"\""}],"text/javascript",["$","span",null,{"className":"token punctuation","children":"\""}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token script","children":["$","span",null,{"className":"token language-javascript","children":["\n  ",["$","span",null,{"className":"token keyword","children":"const"}]," l ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token dom variable","children":"window"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"location"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n  ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"search"}]," ",["$","span",null,{"className":"token operator","children":"&&"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"protocol"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"//"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"host"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"/"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"search"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}]," ",["$","span",null,{"className":"token operator","children":"==="}]," l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"href"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n    ",["$","span",null,{"className":"token keyword","children":"const"}]," path ",["$","span",null,{"className":"token operator","children":"="}]," l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"search"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"substring"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n    ",["$","span",null,{"className":"token dom variable","children":"window"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"history"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"replaceState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword null nil","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword null nil","children":"null"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"protocol"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"//"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"l",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"host"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"/"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"path",["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],"script"]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],"\n"]}]}]}],"\n",["$","p",null,{"children":["In our homepage we navigate using ",["$","code",null,{"children":"history.replaceState()"}]," which modifies the current URL while staying on\nthe currently loaded page, the homepage, which has client side routing enabled. Our path will now load and\nrender as desired!"]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["Note: These scripts assume you don't make use of query parameters in your React app. If you do you can modify\nthem to use a key e.g. ",["$","code",null,{"children":"?redirect=${pathname}"}]," instead of ",["$","code",null,{"children":"?${pathname}"}],"."]}]}],"\n",["$","p",null,{"children":["$","em",null,{"children":["Note: The script element in the homepage must appear before the element that your React app renders to, most\ncommonly the ",["$","code",null,{"children":"<div>"}]," given an id of ",["$","code",null,{"children":"root"}],"."]}]}],"\n",["$","h2",null,{"children":"Conclusion"}],"\n",["$","p",null,{"children":["Being able to deploy React apps to GitHub Pages is a great facility available to us, however\nwe may receive a ",["$","em",null,{"children":"404"}]," page or a ",["$","em",null,{"children":"blank page"}]," which can ruin the experience. There are solutions\navailable to us, of which my preferred is to set up redirects in a custom 404 page on GitHub Pages\nwhich makes paths in our React app both refreshable and shareable, thus restoring the experience."]}],"\n",["$","p",null,{"children":["The source code for this website, which makes use of the solution described in this post, can be\nfound ",["$","a",null,{"href":"https://github.com/DoodleBobBuffPants/DoodleBobBuffPants.github.io","children":"here"}],"."]}],"\n",["$","h4",null,{"children":"References"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"https://github.com/gitname/react-gh-pages#deploying-a-react-app-to-github-pages","children":"Example documentation for deploying a React app to GitHub Pages"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"https://reactrouter.com/en/main/start/overview","children":"React Router overview"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"https://info340.github.io/client-side-routing.html#react-router-and-hosting","children":"React Router and Hosting"}]}],"\n"]}]]}]
